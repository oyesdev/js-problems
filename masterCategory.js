const data = {
  category: [
    {
      name: "Breakfast Cereals-Others",
      id: 75,
      image_url: null,
      parent: {
        name: "Breakfast Cereals",
        id: 65,
        image_url:
          "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/35e3c8b2-df4c-4bb5-acfa-5fd1aebccead-Breakfast%20Cereals.webp",
        parent: {
          name: "Loose Staples",
          id: 1,
          image_url: null,
        },
      },
    },
    {
      name: "Museli",
      id: 69,
      image_url: null,
      parent: {
        name: "Breakfast Cereals",
        id: 65,
        image_url:
          "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/35e3c8b2-df4c-4bb5-acfa-5fd1aebccead-Breakfast%20Cereals.webp",
        parent: {
          name: "Loose Staples",
          id: 1,
          image_url: null,
        },
      },
    },
    {
      name: "Oats",
      id: 72,
      image_url: null,
      parent: {
        name: "Breakfast Cereals",
        id: 65,
        image_url:
          "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/35e3c8b2-df4c-4bb5-acfa-5fd1aebccead-Breakfast%20Cereals.webp",
        parent: {
          name: "Loose Staples",
          id: 1,
          image_url: null,
        },
      },
    },
    {
      name: "Veg Pickles/Chutney",
      id: 102,
      image_url: null,
      parent: {
        name: "Pickles",
        id: 101,
        image_url:
          "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/5c814934-22e2-40ba-8e65-72ece89bd0f4-Pickles.webp",
        parent: {
          name: "Loose Staples",
          id: 1,
          image_url: null,
        },
      },
    },
    {
      name: "Air Freshener",
      id: 389,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/cc1a37d8-d326-41a4-992c-26765067b742-Air_Freshener.webp",
      parent: {
        name: "Home Care",
        id: 9,
        image_url:
          "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/7b1dcbff-53b7-484e-abdc-26f85de94433-Home_Care.webp",
        parent: null,
      },
    },
    {
      name: "Baby Care-Others",
      id: 446,
      image_url:
        "https://s3.ap-south-1.amazonaws.com/dev-cdn.gullynetwork.com/category/15072022/8988d431-731f-4b50-8eda-b4985de5afc4-Salt-250x250.webp",
      parent: {
        name: "Baby Care",
        id: 12,
        image_url:
          "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/97c27eb5-5d33-4355-b9ed-9dc799c57503-Baby_Care.webp",
        parent: null,
      },
    },
    {
      name: "Chocolates",
      id: 140,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/3dc60744-e584-41c7-b350-1d724f2bf2e6-Chocolates.webp",
      parent: {
        name: "Others",
        id: 3,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Cigarettes",
      id: 138,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/44d2bde7-ae55-4270-96f1-c5c7d8fa1452-Cigarettes.webp",
      parent: {
        name: "Others",
        id: 3,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Cold Drinks",
      id: 111,
      image_url:
        "https://s3.ap-south-1.amazonaws.com/dev-cdn.gullynetwork.com/category/15072022/26f670d5-de79-46d9-9325-e7fdc8380038-Cold%20Drinks-250x250.webp",
      parent: {
        name: "Fruits and Vegetables",
        id: 2,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Concentrates/Mixes",
      id: 132,
      image_url:
        "https://s3.ap-south-1.amazonaws.com/dev-cdn.gullynetwork.com/category/15072022/bd3d12cf-600a-4f6d-92ab-096be16b6d30-Chocolates-250x250.webp",
      parent: {
        name: "Fruits and Vegetables",
        id: 2,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Cooking - Others",
      id: 218,
      image_url:
        "https://s3.ap-south-1.amazonaws.com/dev-cdn.gullynetwork.com/category/15072022/25bc59be-3fd7-4b73-ae0f-ac9c39acc2f0-Group%202908-250x250.webp",
      parent: {
        name: "1. Local Skus",
        id: 5,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Diapers",
      id: 444,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/9795dac7-c0fd-4900-9b95-e335706beb9e-Diapers.webp",
      parent: {
        name: "Baby Care",
        id: 12,
        image_url:
          "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/97c27eb5-5d33-4355-b9ed-9dc799c57503-Baby_Care.webp",
        parent: null,
      },
    },
    {
      name: "Energy Drinks",
      id: 134,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/6d7ce92d-c05d-44d3-94f2-58d20e728bd1-Energy_Drinks.webp",
      parent: {
        name: "Fruits and Vegetables",
        id: 2,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Fruit Juices/Drinks",
      id: 113,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/27c3e581-cefc-4396-b65e-ddf190a324ec-Fruit%20Juices%20%26%20Drinks.webp",
      parent: {
        name: "Fruits and Vegetables",
        id: 2,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Health Drink",
      id: 130,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/34699864-9da6-4847-9706-054bada4f0a3-Health%20Drink.webp",
      parent: {
        name: "Fruits and Vegetables",
        id: 2,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Mints/Chewing Gums",
      id: 142,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/352ea59f-521f-4d2a-9781-e002ad91abf3-Mints_Chewing_Gum.webp",
      parent: {
        name: "Others",
        id: 3,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Staples-Others",
      id: 180,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/4c9d4ccd-f742-4180-a70d-1ecee8c75d5c-Staples%20Others.webp",
      parent: {
        name: "Barcode Difficulty",
        id: 4,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Sweets/Mouth Freshener",
      id: 107,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/aef37942-1fa3-4758-9b27-390205ef9b75-Sweets_Mouth_Freshners.webp",
      parent: {
        name: "Loose Staples",
        id: 1,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Toffees/Candies",
      id: 144,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/3254fcdb-2462-4802-8cb6-6535da96c5a4-Toffee_Candies_Lollypops.webp",
      parent: {
        name: "Others",
        id: 3,
        image_url: null,
        parent: null,
      },
    },
    {
      name: "Water",
      id: 136,
      image_url:
        "https://s3.ap-southeast-1.amazonaws.com/cdn.gullynetwork.com/category/11062020/11d84af8-174b-4497-a8de-8b87c1358372-Water.webp",
      parent: {
        name: "Fruits and Vegetables",
        id: 2,
        image_url: null,
        parent: null,
      },
    },
  ],
};

function createSubCategory(category, parent, obj) {
  const { name, id, image_url } = category;
  let subCat = {
    name: name,
    id: id,
    image_url: image_url,
  };
  if (obj.hasOwnProperty(parent.name)) {
    const lookforSubCat = obj[parent.name]["children"].find(
      (ele) => ele.id === subCat.id
    );
    !lookforSubCat && obj[parent.name]["children"].push(subCat);
  } else {
    obj[parent.name] = {
      name: parent.name,
      id: parent.id,
      children: [subCat],
    };
  }
}

function getCategoryObj(data) {
  const { category } = data;
  let obj = {};
  for (let i = 0; i < category.length; i++) {
    const element = category[i];
    if (element.parent.parent === null) {
      createSubCategory(element, element.parent, obj);
    } else {
      createSubCategory(element.parent, element.parent.parent, obj);
    }
  }
  console.log(obj);
}

getCategoryObj(data);
